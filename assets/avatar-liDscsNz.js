import{j as l}from"./jsx-runtime-D504mV7P.js";import{r as o}from"./iframe-B_O_Lmrz.js";import{c as j}from"./index-Dh3K1LF9.js";import{u as k}from"./index-B26hlpGq.js";import{u as f}from"./index-BnIzK0Qe.js";import{P as g}from"./index-C7IQjYoj.js";import{s as F}from"./index-DkSwWaKu.js";import{c as _}from"./utils-CDN07tui.js";function M(){return F.useSyncExternalStore(P,()=>!0,()=>!1)}function P(){return()=>{}}var A="Avatar",[q]=j(A),[V,N]=q(A),x=o.forwardRef((a,e)=>{const{__scopeAvatar:t,...n}=a,[s,r]=o.useState("idle");return l.jsx(V,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:r,children:l.jsx(g.span,{...n,ref:e})})});x.displayName=A;var L="AvatarImage",S=o.forwardRef((a,e)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:s=()=>{},...r}=a,u=N(L,t),d=T(n,r),i=k(c=>{s(c),u.onImageLoadingStatusChange(c)});return f(()=>{d!=="idle"&&i(d)},[d,i]),d==="loaded"?l.jsx(g.img,{...r,ref:e,src:n}):null});S.displayName=L;var w="AvatarFallback",I=o.forwardRef((a,e)=>{const{__scopeAvatar:t,delayMs:n,...s}=a,r=N(w,t),[u,d]=o.useState(n===void 0);return o.useEffect(()=>{if(n!==void 0){const i=window.setTimeout(()=>d(!0),n);return()=>window.clearTimeout(i)}},[n]),u&&r.imageLoadingStatus!=="loaded"?l.jsx(g.span,{...s,ref:e}):null});I.displayName=w;function h(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function T(a,{referrerPolicy:e,crossOrigin:t}){const n=M(),s=o.useRef(null),r=n?(s.current||(s.current=new window.Image),s.current):null,[u,d]=o.useState(()=>h(r,a));return f(()=>{d(h(r,a))},[r,a]),f(()=>{const i=R=>()=>{d(R)};if(!r)return;const c=i("loaded"),y=i("error");return r.addEventListener("load",c),r.addEventListener("error",y),e&&(r.referrerPolicy=e),typeof t=="string"&&(r.crossOrigin=t),()=>{r.removeEventListener("load",c),r.removeEventListener("error",y)}},[r,t,e]),u}var C=x,b=S,E=I;const m=o.forwardRef(({className:a,...e},t)=>l.jsx(C,{ref:t,className:_("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...e}));m.displayName=C.displayName;const p=o.forwardRef(({className:a,...e},t)=>l.jsx(b,{ref:t,className:_("aspect-square h-full w-full",a),...e}));p.displayName=b.displayName;const v=o.forwardRef(({className:a,...e},t)=>l.jsx(E,{ref:t,className:_("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...e}));v.displayName=E.displayName;try{m.displayName="Avatar",m.__docgenInfo={description:"",displayName:"Avatar",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean | undefined"}}}}}catch{}try{p.displayName="AvatarImage",p.__docgenInfo={description:"",displayName:"AvatarImage",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean | undefined"}}}}}catch{}try{v.displayName="AvatarFallback",v.__docgenInfo={description:"",displayName:"AvatarFallback",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean | undefined"}}}}}catch{}export{m as A,p as a,v as b};
